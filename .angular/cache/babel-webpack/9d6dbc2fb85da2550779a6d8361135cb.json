{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { IoPlayerService } from './io-player.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./io-player.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"coverEl\"];\nconst _c1 = [\"timelineBar\"];\n\nconst _c2 = function (a0) {\n  return {\n    play: a0\n  };\n};\n\nconst _c3 = function (a0) {\n  return {\n    \"isPlaying\": a0\n  };\n};\n\nconst _c4 = function (a0) {\n  return {\n    backgroundImage: a0\n  };\n};\n\nconst _c5 = function (a0) {\n  return {\n    width: a0\n  };\n};\n\nexport let IoPlayerComponent = /*#__PURE__*/(() => {\n  class IoPlayerComponent {\n    constructor(playerService, changeRef) {\n      this.playerService = playerService;\n      this.changeRef = changeRef;\n      this.isPlaying = false;\n      this.progression = 0;\n      this.forwardOffsetStep = 10.0;\n      this.subscriptions = [];\n      this.progression$ = new EventEmitter();\n    }\n\n    set fastForward(step) {\n      this.forwardOffsetStep = parseFloat(step);\n    }\n\n    ngOnInit() {\n      this.playerService.init(this.src);\n      this.subscriptions.push(this.playerService.isPlaying$.subscribe(state => {\n        this.isPlaying = state;\n        this.changeRef.detectChanges();\n      }), this.playerService.percentageReaded$.subscribe(state => {\n        this.progression = state;\n        this.progression$.emit(state);\n        this.changeRef.detectChanges();\n      }));\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.forEach(subscription => subscription.unsubscribe());\n    }\n    /**\n     * Click handler on play pause button.\n     */\n\n\n    onPlayHandler() {\n      if (!this.isPlaying) {\n        this.playerService.play();\n      } else {\n        this.playerService.pause();\n      }\n    }\n    /**\n     * Click Handler on timeline bar\n     */\n\n\n    onChangeTimelinekHandler($event) {\n      const percentage = Math.floor($event.offsetX / this.timelineElement.nativeElement.offsetWidth * 100);\n      this.playerService.readFromPercentage(percentage);\n    }\n\n    onFastBackwardHandler() {\n      this.playerService.backward(this.forwardOffsetStep);\n    }\n\n    onFastForwardHandler() {\n      this.playerService.forward(this.forwardOffsetStep);\n    }\n\n  }\n\n  IoPlayerComponent.ɵfac = function IoPlayerComponent_Factory(t) {\n    return new (t || IoPlayerComponent)(i0.ɵɵdirectiveInject(i1.IoPlayerService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n\n  IoPlayerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IoPlayerComponent,\n    selectors: [[\"io-player\"]],\n    viewQuery: function IoPlayerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.coverElement = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.timelineElement = _t.first);\n      }\n    },\n    inputs: {\n      src: \"src\",\n      cover: \"cover\",\n      author: \"author\",\n      song: \"song\",\n      fastForward: \"fastForward\"\n    },\n    outputs: {\n      progression$: \"progression\"\n    },\n    features: [i0.ɵɵProvidersFeature([IoPlayerService])],\n    decls: 35,\n    vars: 14,\n    consts: [[1, \"player\", 3, \"ngClass\"], [1, \"player__bar\"], [1, \"player__album\"], [1, \"player__scale-wrapper\", 3, \"ngClass\"], [1, \"player__albumImg\", \"active-song\", 3, \"ngStyle\"], [\"coverEl\", \"\"], [1, \"player__controls\"], [1, \"player__prev\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 100 100\", 1, \"icon\"], [\"d\", \"M26.695 34.434v31.132L54.5 49.998z\"], [\"d\", \"M24.07 34.434v31.132c0 2.018 2.222 3.234 3.95 2.267l27.804-15.568c1.706-.955 1.707-3.578 0-4.533L28.02 32.168c-2.957-1.655-5.604 2.88-2.649 4.533l27.805 15.564v-4.533L25.371 63.3l3.95 2.267V34.435c-.001-3.387-5.251-3.387-5.251-.001z\"], [\"d\", \"M55.5 34.434v31.132l27.805-15.568z\"], [\"d\", \"M52.875 34.434v31.132c0 2.018 2.222 3.234 3.949 2.267 9.27-5.189 18.537-10.379 27.805-15.568 1.705-.955 1.705-3.578 0-4.533L56.824 32.168c-2.957-1.655-5.604 2.88-2.648 4.533l27.803 15.564v-4.533L54.176 63.3l3.949 2.267V34.435c0-3.387-5.25-3.387-5.25-.001z\"], [1, \"player__play\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 64 64\", 1, \"icon\", \"play\"], [\"d\", \"M51.109 30.335l-36-24A2 2 0 0 0 12 8v48a2.003 2.003 0 0 0 2 2c.388 0 .775-.113 1.109-.336l36-24a2 2 0 0 0 0-3.329z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 100 100\", 1, \"icon\", \"pause\"], [\"d\", \"M22.537 8.046h17.791c1.104 0 2.003.898 2.003 1.993v79.912a2.005 2.005 0 0 1-2.003 2.003h-17.79a2.005 2.005 0 0 1-2.003-2.003V10.04c0-1.095.898-1.993 2.002-1.993zM59.672 8.046h17.8c1.095 0 1.993.898 1.993 1.993v79.912a2.003 2.003 0 0 1-1.993 2.003h-17.8a1.997 1.997 0 0 1-1.993-2.003V10.04c0-1.095.889-1.993 1.993-1.993z\"], [1, \"player__next\", 3, \"click\"], [1, \"player__timeline\"], [1, \"player__author\"], [1, \"player__song\"], [1, \"player__timelineHit\", 3, \"click\"], [1, \"player__timelineBar\"], [\"timelineBar\", \"\"], [\"id\", \"playhead\", 3, \"ngStyle\"]],\n    template: function IoPlayerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"div\", 4, 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵlistener(\"click\", function IoPlayerComponent_Template_div_click_7_listener() {\n          return ctx.onFastBackwardHandler();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(8, \"svg\", 8);\n        i0.ɵɵelement(9, \"path\", 9);\n        i0.ɵɵelement(10, \"path\", 10);\n        i0.ɵɵelementStart(11, \"g\");\n        i0.ɵɵelement(12, \"path\", 11);\n        i0.ɵɵelement(13, \"path\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(14, \"div\", 13);\n        i0.ɵɵlistener(\"click\", function IoPlayerComponent_Template_div_click_14_listener() {\n          return ctx.onPlayHandler();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(15, \"svg\", 14);\n        i0.ɵɵelement(16, \"path\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"svg\", 16);\n        i0.ɵɵelement(18, \"path\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(19, \"div\", 18);\n        i0.ɵɵlistener(\"click\", function IoPlayerComponent_Template_div_click_19_listener() {\n          return ctx.onFastForwardHandler();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(20, \"svg\", 8);\n        i0.ɵɵelement(21, \"path\", 9);\n        i0.ɵɵelement(22, \"path\", 10);\n        i0.ɵɵelementStart(23, \"g\");\n        i0.ɵɵelement(24, \"path\", 11);\n        i0.ɵɵelement(25, \"path\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(26, \"div\", 19);\n        i0.ɵɵelementStart(27, \"p\", 20);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"p\", 21);\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function IoPlayerComponent_Template_button_click_31_listener($event) {\n          return ctx.onChangeTimelinekHandler($event);\n        });\n        i0.ɵɵelementStart(32, \"div\", 23, 24);\n        i0.ɵɵelement(34, \"div\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c2, ctx.isPlaying));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c3, ctx.isPlaying));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(10, _c4, \"url(\" + ctx.cover + \")\"));\n        i0.ɵɵadvance(24);\n        i0.ɵɵtextInterpolate1(\" \", ctx.author, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.song, \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(12, _c5, ctx.progression + \"%\"));\n      }\n    },\n    directives: [i2.NgClass, i2.NgStyle],\n    styles: [\".player[_ngcontent-%COMP%]{position:relative;display:inline-block;max-width:420px;margin-top:80px}.player.play[_ngcontent-%COMP%]   .player__timeline[_ngcontent-%COMP%]{transform:translateY(-100%)}.player.play[_ngcontent-%COMP%]   .player__album[_ngcontent-%COMP%]:after{box-shadow:0 30px 28px -10px #0003}.player.play[_ngcontent-%COMP%]   .player__album[_ngcontent-%COMP%]{top:-65px}.player.play[_ngcontent-%COMP%]   .pause[_ngcontent-%COMP%]{display:inline-block}.player.play[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{display:none}.player.play[_ngcontent-%COMP%]   .player__prev[_ngcontent-%COMP%], .player.play[_ngcontent-%COMP%]   .player__next[_ngcontent-%COMP%]{cursor:pointer}.player.play[_ngcontent-%COMP%]   .player__prev[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .player.play[_ngcontent-%COMP%]   .player__next[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#d7dce2}.player.play[_ngcontent-%COMP%]   .player__prev[_ngcontent-%COMP%]:hover, .player.play[_ngcontent-%COMP%]   .player__next[_ngcontent-%COMP%]:hover{background:#D7DCE2}.player.play[_ngcontent-%COMP%]   .player__prev[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%], .player.play[_ngcontent-%COMP%]   .player__next[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#fff}.player__album[_ngcontent-%COMP%]{width:112px;min-width:112px;height:112px;min-height:112px;border-radius:50%;position:relative;top:-50px;transition:all .4s ease-in-out}.player__album[_ngcontent-%COMP%]:before{content:\\\"\\\";width:25px;height:25px;position:absolute;z-index:3;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:50%}.player__album[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:50%;box-shadow:none;transition:all .3s ease-in-out}.player__scale-wrapper[_ngcontent-%COMP%]{transform:scale(1);transition:all .4s ease-in-out;width:100%;height:100%}.player__scale-wrapper.isPlaying[_ngcontent-%COMP%]{transform:scale(1.1)}.player__scale-wrapper.isPlaying[_ngcontent-%COMP%]   .player__albumImg[_ngcontent-%COMP%]{animation:rotating 4s linear infinite}.player__scale-wrapper[_ngcontent-%COMP%]   .player__albumImg[_ngcontent-%COMP%]{background-size:cover;background:no-repeat center;width:100%;height:100%;border-radius:50%;position:relative;z-index:2;display:none}.player__scale-wrapper[_ngcontent-%COMP%]   .player__albumImg.active-song[_ngcontent-%COMP%]{display:block}.player__bar[_ngcontent-%COMP%]{background:#fff;padding:10px 25px;height:100px;display:flex;justify-content:space-between;border-radius:15px;box-shadow:0 30px 56px 6px #0000001a;position:relative;z-index:3}.player__controls[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:22px}.player__play[_ngcontent-%COMP%], .player__next[_ngcontent-%COMP%], .player__prev[_ngcontent-%COMP%]{cursor:default;height:80px;width:80px;display:flex;justify-content:center;align-items:center;border-radius:15px;transition:all .2s ease-in-out;position:relative}.player__play[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .player__next[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .player__prev[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:inline-block;width:2em;height:2em;font-size:30px;fill:#d7dce2;transition:all .2s ease-in-out}.player__play[_ngcontent-%COMP%]   svg.pause[_ngcontent-%COMP%], .player__next[_ngcontent-%COMP%]   svg.pause[_ngcontent-%COMP%], .player__prev[_ngcontent-%COMP%]   svg.pause[_ngcontent-%COMP%]{display:none}.player__prev[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .player__next[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#f3f3f3}.player__prev[_ngcontent-%COMP%]{transform:rotate(180deg)}.player__play[_ngcontent-%COMP%]{cursor:pointer}.player__play[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{font-size:20px}.player__play[_ngcontent-%COMP%]:hover{background:#D7DCE2}.player__play[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#fff}.player__timeline[_ngcontent-%COMP%]{background:#fff6fb;height:95px;border-radius:15px;position:absolute;bottom:0;left:10px;right:10px;transform:translateY(0);transition:all .3s ease-in-out;z-index:1;padding:0 5px 0 160px;flex-direction:column;justify-content:center}.player__timelineBar[_ngcontent-%COMP%]{background:#E7E7E7;width:100%;height:4px;border-radius:15px;margin-top:0;position:relative}.player__timelineHit[_ngcontent-%COMP%]{border:none;margin:0;padding:0;display:block;background:transparent;width:100%;height:15px}.player__timelineHit[_ngcontent-%COMP%]:focus{-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.player[_ngcontent-%COMP%]   #playhead[_ngcontent-%COMP%]{position:absolute;top:0;left:0;border-radius:15px;width:0;height:100%;background:#fd6d94}.player__author[_ngcontent-%COMP%]{line-height:1;font-weight:bold;margin-bottom:6px;margin-top:15px}.player__song[_ngcontent-%COMP%]{line-height:1;margin:0;font-size:12px;color:#949494}@keyframes rotating{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.rotating[_ngcontent-%COMP%]{animation:rotating 4s linear infinite}\"],\n    changeDetection: 0\n  });\n  return IoPlayerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}